{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "title": {"text":"Avg. monthly household expenditure by category in Malaysia (2004-2019)",
  "fontSize":20,
  "offset": 15
  },
  "width":600,
  "height":300,
  
  "data": {"url": "https://raw.githubusercontent.com/ypy-ifa/FIT3179/main/data/grouped_expenditure.csv"},
  
  "params": [
    {
      "name": "selectedYear",
      "value": 2019,
      "bind": {
        "input": "select",
        "options": [2004, 2009, 2014, 2019],
        "labels": ["2004", "2009", "2014", "2019"],
        "name": "Select Year: "
      }
    },
    {
      "name": "shared_select",
      "select": {"type": "point", "fields": ["Expenditure group"], "on": "click"}
    }
  ],

  "transform": [
    {"filter": "datum.Year == selectedYear"}
  ],

  "mark": "bar",

  "encoding": {
    "x": {
      "field": "Mean monthly household consumption expenditure (RM)",
      "type": "quantitative",
      "title": "Mean Monthly Expenditure (RM)",
      "scale": {"domain":[0,1100]}
    },
    "y": {
      "field": "Expenditure group",
      "type": "nominal",
      "title": "Expenditure Category",
      "sort": "-x",
      "axis": {
      "labelFontSize": 11,
      "labelAngle":-30
    }
  },
    "color": {
      "field": "Category",
      "type": "nominal",
      "legend": null,
      "scale": {
        "scheme": "lighttealblue"
      }
    },  
    "opacity": {
      "condition": 
        {"param": "shared_select", "value": 1},
      "value": 0.2
    },
    "tooltip": [
      {"field": "Expenditure group", "title": "Category"},
      {"field": "Year", "title": "Year"},
      {"field": "Mean monthly household consumption expenditure (RM)",
      "title": "Mean Monthly Expenditure (RM)",
      "format": ",.0f"}
    ]
  },

  "config": {
    "axis": {"titleFontSize": 16, "labelFontSize": 12},
    "view": {"stroke": "transparent"}
  }
}

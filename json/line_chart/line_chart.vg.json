{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text":"Mean Monthly Household Expenditure by Category in Malaysia (2004–2019)",
    "fontSize": 20,
    "offset": 15,
    "subtitle": "(Click on the lines or bars to highlight the respective Expenditure category)",
    "subtitleFontSize":13,
    "subtitlePadding": 10,
    "anchor": "start"
    },
  "width": 670,
  "height": 350,
  "description": "Trends in household expenditure across 12 categories (2004–2019)",
  "data": {"url": "https://raw.githubusercontent.com/ypy-ifa/FIT3179/main/data/grouped_expenditure.csv"},

  "params": [{
    "name": "shared_select",
    "select": {
        "type": "point",
        "fields": ["Expenditure group"],
        "on": "click"
        }
      }
  ],
  
  "mark": {"type": "line", "point": true},
  
  "encoding": {
    "x": {"field": "Year",
    "type": "ordinal",
    "title": "Year",
    "axis": {
        "labelAngle": 0
        }
    }, 
    "y": {"field": "Mean monthly household consumption expenditure (RM)",
    "type": "quantitative",
    "title": "Mean Monthly Expenditure (RM)"
    },
    "color": {
        "field": "Expenditure group",
        "type": "nominal",
        "title": "Expenditure Group",
        "scale": {"scheme": "tableau20"},
        "legend": {
            "symbolType": "stroke",
            "orient": "right"
        }
    },
    "opacity": {
      "condition": 
        {"param": "shared_select", "value": 1},
      "value": 0.2
    },
    "tooltip": [
      {"field": "Expenditure group", "type": "nominal"},
      {"field": "Year", "type": "ordinal"},
      {"field": "Mean monthly household consumption expenditure (RM)", "type": "quantitative", "title": "Avg monthly household expenditure (RM)"}
    ]
  },
    "config": {
    "axis": {"titleFontSize": 16, "labelFontSize": 12}
  }
}